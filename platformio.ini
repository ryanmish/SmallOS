; SmallTV Firmware
; Generic ESP32 firmware for GeekMagic SmallTV Pro
; https://github.com/ryanmish/smalltv-firmware

[platformio]
default_envs = smalltv-pro

[env:smalltv-pro]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
upload_speed = 460800

; Partition table: dual OTA + SPIFFS
; app0 ~1.9MB, app1 ~1.9MB, spiffs ~1.5MB
board_build.partitions = min_spiffs.csv
board_build.filesystem = littlefs

build_flags =
    ; Display pins (ST7789V 240x240, confirmed working)
    -D DISPLAY_WIDTH=240
    -D DISPLAY_HEIGHT=240
    -D TFT_SCK=18
    -D TFT_MOSI=23
    -D TFT_DC=2
    -D TFT_RST=4
    -D TFT_BL=25

    ; Touch sensor
    -D TOUCH_PIN=T9

    ; Firmware version (injected at build time)
    -D FW_VERSION=\"1.2.2\"

    ; Compiler warnings
    -Wall

lib_deps =
    lovyan03/LovyanGFX@^1
    bblanchon/ArduinoJson@^7
